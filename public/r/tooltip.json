{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tooltip",
  "type": "registry:component",
  "title": "Tooltip",
  "description": "Tooltip component with positioning and animations",
  "dependencies": [
    "@ariakit/react",
    "class-variance-authority",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "registry/ui/tooltip.tsx",
      "content": "'use client';\n\nimport * as Ariakit from '@ariakit/react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\ntype AnyEventHandler = (...args: unknown[]) => void;\n\nconst isEventHandlerKey = (key: string) =>\n\tkey.startsWith('on') && key.length > 2 && key[2] === key[2]?.toUpperCase();\n\nconst isAnyEventHandler = (value: unknown): value is AnyEventHandler =>\n\ttypeof value === 'function';\n\nconst composeEventHandlers = (\n\tchildHandler?: AnyEventHandler,\n\tanchorHandler?: AnyEventHandler,\n) => {\n\tif (!childHandler) return anchorHandler;\n\tif (!anchorHandler) return childHandler;\n\treturn (...args: unknown[]) => {\n\t\tchildHandler(...args);\n\t\tconst event = args[0];\n\t\tconst defaultPrevented =\n\t\t\tevent && typeof event === 'object' && 'defaultPrevented' in event\n\t\t\t\t? Boolean((event as { defaultPrevented?: boolean }).defaultPrevented)\n\t\t\t\t: false;\n\t\tif (!defaultPrevented) {\n\t\t\tanchorHandler(...args);\n\t\t}\n\t};\n};\n\nconst mergeRefs = <T,>(\n\t...refs: (React.Ref<T> | undefined)[]\n): React.RefCallback<T> | undefined => {\n\tconst validRefs = refs.filter(Boolean);\n\tif (validRefs.length === 0) {\n\t\treturn undefined;\n\t}\n\treturn (node: T | null) => {\n\t\tfor (const ref of validRefs) {\n\t\t\tif (!ref) continue;\n\t\t\tif (typeof ref === 'function') {\n\t\t\t\tref(node);\n\t\t\t} else {\n\t\t\t\t(ref as React.MutableRefObject<T | null>).current = node;\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst tooltipContentVariants = cva(\n\t`pointer-events-auto z-50 origin-top -translate-y-2 scale-95 rounded-md border px-3 py-2 text-sm opacity-0 shadow-md card-highlight transition-[translate,opacity,scale] duration-300 ease-smooth data-enter:translate-y-0 data-enter:scale-100 data-enter:opacity-100 data-leave:-translate-y-2 data-leave:scale-95 data-leave:opacity-0`,\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: `border-border bg-popover text-foreground`,\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t},\n\t},\n);\n\nexport type TooltipPlacement = 'top' | 'bottom' | 'left' | 'right';\n\nexport interface TooltipProps {\n\tchildren: React.ReactNode;\n\tdelayDuration?: number;\n\tplacement?: TooltipPlacement;\n\tgutter?: number;\n\tportal?: boolean;\n\tfixed?: boolean;\n\tshowArrow?: boolean;\n}\n\nexport interface TooltipTriggerProps extends Ariakit.TooltipAnchorProps {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}\n\nexport interface TooltipContentProps\n\textends React.HTMLAttributes<HTMLDivElement>,\n\t\tVariantProps<typeof tooltipContentVariants> {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}\n\ninterface TooltipConfig {\n\tgutter?: number;\n\tportal?: boolean;\n\tfixed?: boolean;\n\tshowArrow?: boolean;\n}\n\nconst TooltipConfigContext = React.createContext<TooltipConfig>({\n\tgutter: 0,\n\tportal: true,\n\tfixed: false,\n\tshowArrow: true,\n});\n\nconst useTooltipConfig = () => React.useContext(TooltipConfigContext);\n\nexport const Tooltip: React.FC<TooltipProps> = ({\n\tchildren,\n\tdelayDuration = 400,\n\tplacement = 'top',\n\tgutter = 0,\n\tportal = true,\n\tfixed = false,\n\tshowArrow = true,\n}) => {\n\treturn (\n\t\t<TooltipConfigContext.Provider value={{ gutter, portal, fixed, showArrow }}>\n\t\t\t<Ariakit.TooltipProvider\n\t\t\t\tshowTimeout={delayDuration}\n\t\t\t\thideTimeout={100}\n\t\t\t\tplacement={placement}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Ariakit.TooltipProvider>\n\t\t</TooltipConfigContext.Provider>\n\t);\n};\n\nexport const TooltipTrigger: React.FC<TooltipTriggerProps> = ({\n\tchildren,\n\tclassName,\n\t...props\n}) => {\n\tconst { autoFocus, ...restProps } = props;\n\n\tif (React.isValidElement(children)) {\n\t\treturn (\n\t\t\t<Ariakit.TooltipAnchor\n\t\t\t\trender={(anchorProps) => {\n\t\t\t\t\tconst childElement = children as React.ReactElement<\n\t\t\t\t\t\tRecord<string, unknown>\n\t\t\t\t\t> & {\n\t\t\t\t\t\tref?: React.Ref<unknown>;\n\t\t\t\t\t};\n\t\t\t\t\tconst childProps = (childElement.props ?? {}) as Record<\n\t\t\t\t\t\tstring,\n\t\t\t\t\t\tunknown\n\t\t\t\t\t> & { className?: string };\n\t\t\t\t\tconst {\n\t\t\t\t\t\tref: anchorRef,\n\t\t\t\t\t\tclassName: anchorClassName,\n\t\t\t\t\t\t...restAnchorProps\n\t\t\t\t\t} = anchorProps;\n\t\t\t\t\tconst mergedProps: Record<string, unknown> & {\n\t\t\t\t\t\tclassName?: string;\n\t\t\t\t\t} = { ...childProps };\n\n\t\t\t\t\tObject.entries(restAnchorProps as Record<string, unknown>).forEach(\n\t\t\t\t\t\t([key, value]) => {\n\t\t\t\t\t\t\tif (isEventHandlerKey(key) && isAnyEventHandler(value)) {\n\t\t\t\t\t\t\t\tconst existingHandler = mergedProps[key] as\n\t\t\t\t\t\t\t\t\t| AnyEventHandler\n\t\t\t\t\t\t\t\t\t| undefined;\n\t\t\t\t\t\t\t\tmergedProps[key] = composeEventHandlers(existingHandler, value);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmergedProps[key] = value;\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\n\t\t\t\t\tmergedProps.className = cn(\n\t\t\t\t\t\t'inline-flex items-center',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tanchorClassName as string | undefined,\n\t\t\t\t\t\tchildProps.className,\n\t\t\t\t\t);\n\n\t\t\t\t\treturn React.cloneElement(childElement, {\n\t\t\t\t\t\t...mergedProps,\n\t\t\t\t\t\tref: mergeRefs(childElement.ref, anchorRef as React.Ref<unknown>),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\t{...(autoFocus === undefined ? {} : { autoFocus })}\n\t\t\t\t{...restProps}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Ariakit.TooltipAnchor\n\t\t\tclassName={cn('inline-flex items-center', className)}\n\t\t\t{...(autoFocus === undefined ? {} : { autoFocus })}\n\t\t\t{...restProps}\n\t\t>\n\t\t\t{children}\n\t\t</Ariakit.TooltipAnchor>\n\t);\n};\n\nexport const TooltipContent: React.FC<TooltipContentProps> = ({\n\tchildren,\n\tclassName,\n\tvariant = 'default',\n\tautoFocus,\n\t...props\n}) => {\n\tconst {\n\t\tgutter: contextGutter,\n\t\tportal: contextPortal,\n\t\tfixed: contextFixed,\n\t\tshowArrow: contextShowArrow,\n\t} = useTooltipConfig();\n\tconst tooltipStore = Ariakit.useTooltipContext();\n\tif (!tooltipStore) {\n\t\tthrow new Error('TooltipContent must be used within <Tooltip>');\n\t}\n\tconst currentPlacement = Ariakit.useStoreState(\n\t\ttooltipStore,\n\t\t'currentPlacement',\n\t);\n\tconst shouldTintArrow = currentPlacement?.startsWith('bottom');\n\tconst arrowStyle = shouldTintArrow\n\t\t? { stroke: 'var(--arrow-highlight)' }\n\t\t: undefined;\n\n\treturn (\n\t\t<Ariakit.Tooltip\n\t\t\tclassName={cn(tooltipContentVariants({ variant }), className)}\n\t\t\tgutter={contextGutter}\n\t\t\tportal={contextPortal ?? true}\n\t\t\tfixed={contextFixed ?? false}\n\t\t\t{...(autoFocus === undefined ? {} : { autoFocus })}\n\t\t\t{...props}\n\t\t>\n\t\t\t{children}\n\t\t\t{(contextShowArrow ?? true) ? (\n\t\t\t\t<Ariakit.TooltipArrow style={arrowStyle} />\n\t\t\t) : null}\n\t\t</Ariakit.Tooltip>\n\t);\n};\n",
      "type": "registry:component"
    }
  ]
}