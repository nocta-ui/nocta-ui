{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "popover",
  "type": "registry:component",
  "title": "Popover",
  "description": "Advanced popover component with positioning, collision detection, and animations",
  "dependencies": [
    "@ariakit/react",
    "class-variance-authority",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "registry/ui/popover.tsx",
      "content": "'use client';\n\nimport * as Ariakit from '@ariakit/react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\nconst popoverTriggerVariants = cva(\n\t\"relative inline-flex cursor-pointer items-center justify-center rounded-md border shadow-sm card-highlight transition-[background-color,box-shadow,filter] [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 focus-visible:ring-1 focus-visible:ring-ring/50 focus-visible:ring-offset-1 focus-visible:ring-offset-ring-offset/50 focus-visible:outline-none\",\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: 'bg-card hover:bg-card-muted border-border text-foreground',\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tsm: 'h-8 px-3 py-1.5 px-3 gap-1.5 has-[>svg]:px-2.5 text-sm',\n\t\t\t\tmd: 'h-9 px-4 py-2 gap-2 has-[>svg]:px-3 text-sm',\n\t\t\t\tlg: 'h-10 px-6 py-2 gap-2 has-[>svg]:px-4 text-base',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t\tsize: 'md',\n\t\t},\n\t},\n);\n\nconst popoverContentVariants = cva(\n\t'relative w-fit rounded-lg border shadow-md card-highlight transition-shadow focus-visible:ring-none focus-visible:outline-none',\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: `bg-popover border-border text-foreground`,\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tsm: 'px-3 py-2 text-sm',\n\t\t\t\tmd: 'px-4 py-3 text-sm',\n\t\t\t\tlg: 'px-6 py-4 text-base',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t\tsize: 'md',\n\t\t},\n\t},\n);\n\nconst popoverMotion =\n\t'duration-300 ease-smooth transition-[translate,opacity,scale] opacity-0 scale-95 -translate-y-2 data-enter:opacity-100 data-enter:scale-100 data-enter:translate-y-0 data-leave:opacity-0 data-leave:scale-95 data-leave:-translate-y-2';\n\ntype PopoverPlacement =\n\t| 'top'\n\t| 'top-start'\n\t| 'top-end'\n\t| 'bottom'\n\t| 'bottom-start'\n\t| 'bottom-end'\n\t| 'left'\n\t| 'left-start'\n\t| 'left-end'\n\t| 'right'\n\t| 'right-start'\n\t| 'right-end';\n\nexport interface PopoverProps {\n\tchildren: React.ReactNode;\n\topen?: boolean;\n\tplacement?: PopoverPlacement;\n\tdefaultOpen?: boolean;\n\tonOpenChange?: (open: boolean) => void;\n}\n\nexport interface PopoverTriggerProps\n\textends VariantProps<typeof popoverTriggerVariants> {\n\tchildren: React.ReactNode;\n\tasChild?: boolean;\n\tclassName?: string;\n}\n\nexport interface PopoverContentProps\n\textends VariantProps<typeof popoverContentVariants> {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tportal?: boolean;\n\tfixed?: boolean;\n\tgutter?: number;\n\tshowArrow?: boolean;\n}\n\nexport type PopoverHeadingProps = React.ComponentPropsWithoutRef<\n\ttypeof Ariakit.PopoverHeading\n>;\n\nexport type PopoverDescriptionProps = React.ComponentPropsWithoutRef<\n\ttypeof Ariakit.PopoverDescription\n>;\n\ntype PopoverHeadingElement = React.ComponentRef<typeof Ariakit.PopoverHeading>;\ntype PopoverDescriptionElement = React.ComponentRef<\n\ttypeof Ariakit.PopoverDescription\n>;\n\nconst PopoverStoreContext = React.createContext<Ariakit.PopoverStore | null>(\n\tnull,\n);\n\nexport const Popover: React.FC<PopoverProps> = ({\n\tchildren,\n\topen,\n\tdefaultOpen = false,\n\tonOpenChange,\n\tplacement,\n}) => {\n\tconst store = Ariakit.usePopoverStore({\n\t\t...(placement ? { placement } : {}),\n\t\t...(open !== undefined\n\t\t\t? onOpenChange\n\t\t\t\t? { open, setOpen: onOpenChange }\n\t\t\t\t: { open }\n\t\t\t: { defaultOpen }),\n\t});\n\n\treturn (\n\t\t<PopoverStoreContext.Provider value={store}>\n\t\t\t<Ariakit.PopoverProvider store={store}>\n\t\t\t\t<div className=\"relative\">{children}</div>\n\t\t\t</Ariakit.PopoverProvider>\n\t\t</PopoverStoreContext.Provider>\n\t);\n};\n\nexport const PopoverTrigger: React.FC<PopoverTriggerProps> = ({\n\tchildren,\n\tasChild = false,\n\tclassName = '',\n\tvariant = 'default',\n\tsize = 'md',\n}) => {\n\tconst store = React.useContext(PopoverStoreContext);\n\tif (!store) throw new Error('PopoverTrigger must be used within <Popover>');\n\n\tif (asChild && React.isValidElement(children)) {\n\t\tconst child = children as React.ReactElement<{ className?: string }>;\n\t\tconst merged = React.cloneElement(child, {\n\t\t\tclassName: cn(\n\t\t\t\tchild.props.className,\n\t\t\t\tpopoverTriggerVariants({ variant, size }),\n\t\t\t\t'font-medium',\n\t\t\t\tclassName,\n\t\t\t),\n\t\t});\n\n\t\treturn <Ariakit.PopoverDisclosure render={merged} />;\n\t}\n\n\treturn (\n\t\t<Ariakit.PopoverDisclosure\n\t\t\tclassName={cn(\n\t\t\t\tpopoverTriggerVariants({ variant, size }),\n\t\t\t\t'font-medium',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{children}\n\t\t</Ariakit.PopoverDisclosure>\n\t);\n};\n\nexport const PopoverContent: React.FC<PopoverContentProps> = ({\n\tchildren,\n\tclassName = '',\n\tvariant = 'default',\n\tsize = 'md',\n\tportal = true,\n\tfixed = false,\n\tgutter = 0,\n\tshowArrow = true,\n}) => {\n\tconst store = React.useContext(PopoverStoreContext);\n\tif (!store) throw new Error('PopoverContent must be used within <Popover>');\n\tconst currentPlacement = Ariakit.useStoreState(store, 'currentPlacement');\n\tconst shouldTintArrow = currentPlacement?.startsWith('bottom');\n\tconst arrowStyle = shouldTintArrow\n\t\t? { stroke: 'var(--arrow-highlight)' }\n\t\t: undefined;\n\n\treturn (\n\t\t<Ariakit.Popover\n\t\t\tportal={portal}\n\t\t\tfixed={fixed}\n\t\t\tgutter={gutter}\n\t\t\tclassName={cn(\n\t\t\t\tpopoverContentVariants({ variant, size }),\n\t\t\t\tpopoverMotion,\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{showArrow ? <Ariakit.PopoverArrow style={arrowStyle} /> : null}\n\t\t\t{children}\n\t\t</Ariakit.Popover>\n\t);\n};\n\nexport const PopoverHeading = React.forwardRef<\n\tPopoverHeadingElement,\n\tPopoverHeadingProps\n>(({ className = '', ...props }, ref) => (\n\t<Ariakit.PopoverHeading\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'text-sm leading-none font-medium text-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\n\nPopoverHeading.displayName = 'PopoverHeading';\n\nexport const PopoverDescription = React.forwardRef<\n\tPopoverDescriptionElement,\n\tPopoverDescriptionProps\n>(({ className = '', ...props }, ref) => (\n\t<Ariakit.PopoverDescription\n\t\tref={ref}\n\t\tclassName={cn('text-sm leading-snug text-foreground/70', className)}\n\t\t{...props}\n\t/>\n));\n\nPopoverDescription.displayName = 'PopoverDescription';\n",
      "type": "registry:component"
    }
  ]
}