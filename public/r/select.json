{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "select",
  "type": "registry:component",
  "title": "Select",
  "description": "Custom select component with dropdown and animations",
  "dependencies": [
    "class-variance-authority",
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "nocta-icons",
    "scroll-area"
  ],
  "files": [
    {
      "path": "registry/ui/select.tsx",
      "content": "'use client';\n\nimport * as Ariakit from '@ariakit/react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { cn } from '@/lib/utils';\nimport { Icons } from '@/registry/ui/nocta-icons';\nimport { ScrollArea } from '@/registry/ui/scroll-area';\n\nconst selectTriggerVariants = cva(\n\t`relative flex w-fit cursor-pointer items-center justify-between rounded-md bg-card text-foreground border shadow-sm card-highlight placeholder:text-foreground/45 hover:bg-card-muted transition-[background-color,color,box-shadow] ease-out-quad duration-100 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:ring-offset-ring-offset/50 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50`,\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: `border-border focus-visible:ring-ring/50`,\n\t\t\t\terror: `border-destructive/40 focus-visible:ring-destructive/50 dark:focus-visible:ring-destructive/50`,\n\t\t\t\tsuccess: `border-success/40 focus-visible:ring-success/50 dark:focus-visible:ring-success/50`,\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tsm: 'h-8 px-2.5 py-1.5 px-3 text-sm',\n\t\t\t\tmd: 'h-9 px-3 py-2 text-sm',\n\t\t\t\tlg: 'h-10 px-4 py-2 text-base',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t\tsize: 'md',\n\t\t},\n\t},\n);\n\nexport interface SelectProps\n\textends VariantProps<typeof selectTriggerVariants> {\n\tvalue?: string;\n\tdefaultValue?: string;\n\tonValueChange?: (value: string) => void;\n\tdisabled?: boolean;\n\tchildren: React.ReactNode;\n}\n\nexport interface SelectTriggerProps\n\textends React.ButtonHTMLAttributes<HTMLButtonElement>,\n\t\tVariantProps<typeof selectTriggerVariants> {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}\n\nexport interface SelectContentProps {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tportal?: boolean;\n\tfixed?: boolean;\n}\n\nexport interface SelectItemProps {\n\tvalue: string;\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tdisabled?: boolean;\n}\n\nexport interface SelectValueProps {\n\tplaceholder?: string;\n\tclassName?: string;\n}\n\ntype SelectSize = NonNullable<\n\tVariantProps<typeof selectTriggerVariants>['size']\n>;\ntype SelectVariant = NonNullable<\n\tVariantProps<typeof selectTriggerVariants>['variant']\n>;\n\ntype InternalCtx = {\n\tsize: SelectSize;\n\tvariant: SelectVariant;\n\tdisabled?: boolean;\n};\n\nconst InternalContext = React.createContext<InternalCtx>({\n\tsize: 'md',\n\tvariant: 'default',\n});\n\nexport const Select: React.FC<SelectProps> = ({\n\tvalue: controlledValue,\n\tdefaultValue,\n\tonValueChange,\n\tdisabled = false,\n\tchildren,\n\tsize = 'md',\n\tvariant = 'default',\n}) => {\n\tconst store = Ariakit.useSelectStore(\n\t\tcontrolledValue !== undefined\n\t\t\t? {\n\t\t\t\t\tvalue: controlledValue,\n\t\t\t\t\tsetValue: (v) => onValueChange?.(String(v ?? '')),\n\t\t\t\t\tanimated: true,\n\t\t\t\t}\n\t\t\t: defaultValue !== undefined\n\t\t\t\t? {\n\t\t\t\t\t\tdefaultValue,\n\t\t\t\t\t\tsetValue: (v) => onValueChange?.(String(v ?? '')),\n\t\t\t\t\t\tanimated: true,\n\t\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t\tsetValue: (v) => onValueChange?.(String(v ?? '')),\n\t\t\t\t\t\tanimated: true,\n\t\t\t\t\t},\n\t);\n\n\tReact.useEffect(() => {\n\t\tconsole.log('Child re-rendered!');\n\t});\n\n\tconst normalizedSize: SelectSize = size ?? 'md';\n\tconst normalizedVariant: SelectVariant = variant ?? 'default';\n\tconst contextValue = React.useMemo<InternalCtx>(\n\t\t() => ({ size: normalizedSize, variant: normalizedVariant, disabled }),\n\t\t[normalizedSize, normalizedVariant, disabled],\n\t);\n\n\treturn (\n\t\t<Ariakit.SelectProvider store={store}>\n\t\t\t<InternalContext.Provider value={contextValue}>\n\t\t\t\t<div className=\"relative\">{children}</div>\n\t\t\t</InternalContext.Provider>\n\t\t</Ariakit.SelectProvider>\n\t);\n};\n\nexport const SelectTrigger: React.FC<SelectTriggerProps> = ({\n\tchildren,\n\tclassName = '',\n\tsize: propSize,\n\tvariant: propVariant,\n\tdisabled: disabledProp,\n\tautoFocus,\n\t...props\n}) => {\n\tconst ctx = React.useContext(InternalContext);\n\tconst select = Ariakit.useSelectContext();\n\tconst isOpen = Ariakit.useStoreState(select, (s) => s?.open ?? false);\n\tconst size: SelectSize = propSize ?? ctx.size ?? 'md';\n\tconst variant: SelectVariant = propVariant ?? ctx.variant ?? 'default';\n\tconst disabled = disabledProp ?? ctx.disabled ?? false;\n\tconst triggerProps = {\n\t\t...props,\n\t\t...(typeof autoFocus === 'undefined' ? {} : { autoFocus }),\n\t};\n\n\treturn (\n\t\t<Ariakit.Select\n\t\t\tdisabled={disabled}\n\t\t\tclassName={cn(selectTriggerVariants({ size, variant }), className)}\n\t\t\t{...triggerProps}\n\t\t>\n\t\t\t{children}\n\t\t\t<Icons.ChevronDown\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'ml-2 h-4 w-4 shrink-0 opacity-50 transition-[rotate] duration-300 ease-smooth',\n\t\t\t\t\tisOpen && 'rotate-180',\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Ariakit.Select>\n\t);\n};\n\nexport const SelectContent: React.FC<SelectContentProps> = ({\n\tchildren,\n\tclassName = '',\n\tportal = true,\n\tfixed = false,\n}) => {\n\tconst selectStore = Ariakit.useSelectContext();\n\tif (!selectStore)\n\t\tthrow new Error('SelectContent must be used within <Select>');\n\n\treturn (\n\t\t<Ariakit.SelectPopover\n\t\t\tsameWidth\n\t\t\tportal={portal}\n\t\t\tfixed={fixed}\n\t\t\tclassName={cn(\n\t\t\t\t'absolute z-999 my-1 rounded-md border border-border bg-popover shadow-md card-highlight',\n\t\t\t\t'focus-visible:ring-none focus-visible:outline-none',\n\t\t\t\t'origin-top -translate-y-2 scale-95 opacity-0 transition-[translate,opacity,scale] duration-300 ease-smooth data-enter:translate-y-0 data-enter:scale-100 data-enter:opacity-100 data-leave:-translate-y-2 data-leave:scale-95 data-leave:opacity-0',\n\t\t\t\t'not-prose',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"z-50\">\n\t\t\t\t<ScrollArea\n\t\t\t\t\ttype=\"scroll\"\n\t\t\t\t\tclassName=\"flex flex-col h-full w-full max-h-42\"\n\t\t\t\t>\n\t\t\t\t\t<Ariakit.SelectList\n\t\t\t\t\t\tstore={selectStore}\n\t\t\t\t\t\tclassName=\"flex flex-col py-1 focus-visible:ring-none focus-visible:outline-none\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</Ariakit.SelectList>\n\t\t\t\t</ScrollArea>\n\t\t\t</div>\n\t\t</Ariakit.SelectPopover>\n\t);\n};\n\nexport const SelectItem: React.FC<SelectItemProps> = ({\n\tvalue,\n\tchildren,\n\tclassName = '',\n\tdisabled = false,\n}) => {\n\tconst select = Ariakit.useSelectContext();\n\tconst isSelected = Ariakit.useStoreState(select, (s) => s?.value === value);\n\n\treturn (\n\t\t<Ariakit.SelectItem\n\t\t\tvalue={value}\n\t\t\tdisabled={disabled}\n\t\t\tclassName={cn(\n\t\t\t\t'relative mx-1 flex cursor-pointer items-center justify-between rounded-sm px-2 py-1.5 text-sm text-foreground/70 outline-none select-none hover:bg-popover-muted hover:text-foreground data-active-item:bg-popover-muted data-active-item:text-foreground',\n\t\t\t\t\"[&_svg]:shrink-0 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 gap-2\",\n\t\t\t\tdisabled && 'pointer-events-none cursor-not-allowed opacity-50',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t<span className=\"flex-1\">{children}</span>\n\t\t\t{isSelected && (\n\t\t\t\t<Icons.Check\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tclassName=\"ml-2 h-4 w-4 text-foreground/70\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Ariakit.SelectItem>\n\t);\n};\n\nexport const SelectValue: React.FC<SelectValueProps> = ({\n\tplaceholder = 'Select an option...',\n\tclassName = '',\n}) => {\n\tconst select = Ariakit.useSelectContext();\n\tconst currentValue = Ariakit.useStoreState(select, (s) => s?.value ?? '');\n\tconst items = Ariakit.useStoreState(select, (s) => s?.items ?? []);\n\tconst currentItem = items.find((item) => item.value === currentValue);\n\n\treturn (\n\t\t<span\n\t\t\tclassName={cn(\n\t\t\t\t'block truncate text-left whitespace-pre-wrap text-foreground',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{currentItem ? (\n\t\t\t\tcurrentItem.element?.textContent\n\t\t\t) : (\n\t\t\t\t<span className=\"whitespace-pre-wrap text-foreground/45\">\n\t\t\t\t\t{placeholder}\n\t\t\t\t</span>\n\t\t\t)}\n\t\t</span>\n\t);\n};\n",
      "type": "registry:component"
    }
  ]
}