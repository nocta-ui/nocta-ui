{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "avatar",
  "type": "registry:component",
  "title": "Avatar",
  "description": "Avatar component with image fallback, status indicator, and multiple sizes",
  "dependencies": [
    "class-variance-authority",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "registry/ui/avatar.tsx",
      "content": "'use client';\n\nimport * as Ariakit from '@ariakit/react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport type React from 'react';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Icons } from '@/registry/ui/nocta-icons';\n\nconst avatarVariants = cva(\n\t[\n\t\t'relative inline-flex items-center justify-center',\n\t\t'bg-card-muted',\n\t\t'text-foreground/70',\n\t\t'font-medium select-none',\n\t\t'not-prose',\n\t],\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tcircle: 'rounded-full',\n\t\t\t\tsquare: 'rounded-lg',\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\txs: 'h-6 w-6',\n\t\t\t\tsm: 'h-8 w-8',\n\t\t\t\tmd: 'h-10 w-10',\n\t\t\t\tlg: 'h-12 w-12',\n\t\t\t\txl: 'h-16 w-16',\n\t\t\t\t'2xl': 'h-20 w-20',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'circle',\n\t\t\tsize: 'md',\n\t\t},\n\t},\n);\n\nconst textVariants = cva('font-medium text-foreground/70', {\n\tvariants: {\n\t\tsize: {\n\t\t\txs: 'text-xs',\n\t\t\tsm: 'text-xs',\n\t\t\tmd: 'text-sm',\n\t\t\tlg: 'text-base',\n\t\t\txl: 'text-lg',\n\t\t\t'2xl': 'text-xl',\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tsize: 'md',\n\t},\n});\n\nconst iconVariants = cva('text-foreground/45', {\n\tvariants: {\n\t\tsize: {\n\t\t\txs: 'h-3 w-3',\n\t\t\tsm: 'h-4 w-4',\n\t\t\tmd: 'h-5 w-5',\n\t\t\tlg: 'h-6 w-6',\n\t\t\txl: 'h-8 w-8',\n\t\t\t'2xl': 'h-10 w-10',\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tsize: 'md',\n\t},\n});\n\nconst statusVariants = cva('absolute rounded-full ring-ring-offset', {\n\tvariants: {\n\t\tstatus: {\n\t\t\tonline: 'bg-success',\n\t\t\toffline: 'bg-foreground-subtle',\n\t\t\taway: 'bg-warning',\n\t\t\tbusy: 'bg-destructive',\n\t\t},\n\t\tsize: {\n\t\t\txs: 'right-0 bottom-0 h-1.5 w-1.5 ring-1',\n\t\t\tsm: 'right-0 bottom-0 h-2 w-2 ring-1',\n\t\t\tmd: 'right-0.5 bottom-0.5 h-2.5 w-2.5 ring-1',\n\t\t\tlg: 'right-0.5 bottom-0.5 h-3 w-3 ring-1',\n\t\t\txl: 'right-1 bottom-1 h-3.5 w-3.5 ring-1',\n\t\t\t'2xl': 'right-1 bottom-1 h-4 w-4 ring-1',\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tsize: 'md',\n\t},\n});\n\nexport interface AvatarProps\n\textends React.HTMLAttributes<HTMLDivElement>,\n\t\tVariantProps<typeof avatarVariants> {\n\tsrc?: string;\n\talt?: string;\n\tfallback?: string;\n\tstatus?: 'online' | 'offline' | 'away' | 'busy' | null;\n\tclassName?: string;\n}\n\nexport const Avatar: React.FC<AvatarProps> = ({\n\tsrc,\n\talt = '',\n\tfallback,\n\tsize = 'md',\n\tvariant = 'circle',\n\tstatus = null,\n\tclassName = '',\n\t...props\n}) => {\n\tconst [imageError, setImageError] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (src) {\n\t\t\tsetImageError(false);\n\t\t}\n\t}, [src]);\n\n\tconst handleImageError = () => {\n\t\tsetImageError(true);\n\t};\n\n\tconst getInitials = () => {\n\t\tconst text = fallback || alt || '';\n\t\tif (!text) return '';\n\n\t\tif (text.length <= 2 && !text.includes(' ')) {\n\t\t\treturn text.toUpperCase();\n\t\t}\n\n\t\treturn text\n\t\t\t.split(' ')\n\t\t\t.map((word) => word.charAt(0))\n\t\t\t.join('')\n\t\t\t.toUpperCase()\n\t\t\t.slice(0, 2);\n\t};\n\n\tconst showImage = src && !imageError;\n\tconst showInitials = !showImage && getInitials();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(avatarVariants({ variant, size }), className)}\n\t\t\t{...props}\n\t\t>\n\t\t\t{showImage && (\n\t\t\t\t/* biome-ignore lint/performance/noImgElement: native img is intentional here */\n\t\t\t\t<img\n\t\t\t\t\tsrc={src}\n\t\t\t\t\talt={alt}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'h-full w-full object-cover',\n\t\t\t\t\t\tvariant === 'circle' ? 'rounded-full' : 'rounded-lg',\n\t\t\t\t\t)}\n\t\t\t\t\tonError={handleImageError}\n\t\t\t\t\tloading=\"eager\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttextIndent: '-9999px',\n\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<Ariakit.VisuallyHidden>{`${getInitials()} Avatar`}</Ariakit.VisuallyHidden>\n\n\t\t\t{showInitials && (\n\t\t\t\t<span className={textVariants({ size })}>{getInitials()}</span>\n\t\t\t)}\n\n\t\t\t{!showImage && !showInitials && (\n\t\t\t\t<Icons.User aria-hidden=\"true\" className={iconVariants({ size })} />\n\t\t\t)}\n\n\t\t\t{status && (\n\t\t\t\t<span className={statusVariants({ status, size })} aria-hidden=\"true\" />\n\t\t\t)}\n\t\t</div>\n\t);\n};\n",
      "type": "registry:component"
    }
  ]
}