{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "accordion",
  "type": "registry:component",
  "title": "Accordion",
  "description": "A vertically stacked set of interactive headings that each reveal a section of content",
  "dependencies": [
    "@ariakit/react",
    "class-variance-authority",
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "nocta-icons"
  ],
  "files": [
    {
      "path": "registry/ui/accordion.tsx",
      "content": "'use client';\n\nimport * as Ariakit from '@ariakit/react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport React, { createContext, useCallback, useContext, useMemo } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Icons } from '@/registry/ui/nocta-icons';\n\nconst accordionVariants = cva('w-full', {\n\tvariants: {\n\t\tvariant: {\n\t\t\tdefault: '',\n\t\t\tcard: 'space-y-2',\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tvariant: 'default',\n\t},\n});\n\nconst accordionItemVariants = cva(\n\t'transition-[box-shadow] ease-out-quad duration-100',\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: 'border-b border-border/60 last:border-b-0',\n\t\t\t\tcard: 'rounded-lg [&:has(:focus-visible)]:ring-1 [&:has(:focus-visible)]:ring-ring/50 [&:has(:focus-visible)]:ring-offset-1 [&:has(:focus-visible)]:ring-offset-ring-offset/50 [&:has(:focus-visible)]:outline-none',\n\t\t\t},\n\t\t\tisOpen: {\n\t\t\t\ttrue: '',\n\t\t\t\tfalse: '',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t\tisOpen: false,\n\t\t},\n\t},\n);\n\nconst accordionTriggerVariants = cva(\n\t'flex w-full items-center justify-between rounded-lg text-left text-foreground hover:text-foreground/70 transition-[color,box-shadow] ease-out-quad duration-100',\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault:\n\t\t\t\t\t'focus-visible:ring-1 focus-visible:ring-ring/50 focus-visible:ring-offset-1 focus-visible:ring-offset-ring-offset/50 focus-visible:outline-none',\n\t\t\t\tcard: 'focus-visible:ring-0 focus-visible:outline-none',\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tsm: 'text-xs',\n\t\t\t\tmd: 'text-sm',\n\t\t\t\tlg: 'text-base',\n\t\t\t},\n\t\t\tdisabled: {\n\t\t\t\ttrue: 'cursor-not-allowed opacity-50',\n\t\t\t\tfalse: 'cursor-pointer',\n\t\t\t},\n\t\t\tisOpen: {\n\t\t\t\ttrue: '',\n\t\t\t\tfalse: '',\n\t\t\t},\n\t\t},\n\t\tcompoundVariants: [\n\t\t\t{\n\t\t\t\tvariant: 'default',\n\t\t\t\tsize: 'sm',\n\t\t\t\tclass: 'px-0 py-2',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'default',\n\t\t\t\tsize: 'md',\n\t\t\t\tclass: 'px-0 py-3',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'default',\n\t\t\t\tsize: 'lg',\n\t\t\t\tclass: 'px-0 py-4',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'card',\n\t\t\t\tsize: 'sm',\n\t\t\t\tclass: 'px-3 py-2',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'card',\n\t\t\t\tsize: 'md',\n\t\t\t\tclass: 'px-4 py-3',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'card',\n\t\t\t\tsize: 'lg',\n\t\t\t\tclass: 'px-5 py-4',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'card',\n\t\t\t\tisOpen: true,\n\t\t\t\tclass: '',\n\t\t\t},\n\t\t],\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t\tsize: 'md',\n\t\t\tdisabled: false,\n\t\t\tisOpen: false,\n\t\t},\n\t},\n);\n\nconst accordionContentVariants = cva(\n\t'overflow-hidden transition-[height,opacity] duration-300 ease-smooth',\n\t{\n\t\tvariants: {\n\t\t\tsize: {\n\t\t\t\tsm: 'text-xs',\n\t\t\t\tmd: 'text-sm',\n\t\t\t\tlg: 'text-base',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tsize: 'md',\n\t\t},\n\t},\n);\n\nconst accordionContentInnerVariants = cva('leading-snug text-foreground/70', {\n\tvariants: {\n\t\tvariant: {\n\t\t\tdefault: '',\n\t\t\tcard: 'border-t border-border/60',\n\t\t},\n\t\tsize: {\n\t\t\tsm: '',\n\t\t\tmd: '',\n\t\t\tlg: '',\n\t\t},\n\t},\n\tcompoundVariants: [\n\t\t{\n\t\t\tvariant: 'default',\n\t\t\tsize: 'sm',\n\t\t\tclass: 'pb-2',\n\t\t},\n\t\t{\n\t\t\tvariant: 'default',\n\t\t\tsize: 'md',\n\t\t\tclass: 'pb-3',\n\t\t},\n\t\t{\n\t\t\tvariant: 'default',\n\t\t\tsize: 'lg',\n\t\t\tclass: 'pb-4',\n\t\t},\n\t\t{\n\t\t\tvariant: 'card',\n\t\t\tsize: 'sm',\n\t\t\tclass: 'px-3 py-2',\n\t\t},\n\t\t{\n\t\t\tvariant: 'card',\n\t\t\tsize: 'md',\n\t\t\tclass: 'px-4 py-3',\n\t\t},\n\t\t{\n\t\t\tvariant: 'card',\n\t\t\tsize: 'lg',\n\t\t\tclass: 'px-5 py-4',\n\t\t},\n\t],\n\tdefaultVariants: {\n\t\tvariant: 'default',\n\t\tsize: 'md',\n\t},\n});\n\nexport interface AccordionProps\n\textends React.HTMLAttributes<HTMLDivElement>,\n\t\tVariantProps<typeof accordionVariants> {\n\tchildren: React.ReactNode;\n\tsize?: 'sm' | 'md' | 'lg';\n\tclassName?: string;\n\ttype?: 'single' | 'multiple';\n\n\tonValueChange?: (value: string | string[]) => void;\n}\n\nexport interface AccordionItemProps\n\textends React.HTMLAttributes<HTMLDivElement>,\n\t\tVariantProps<typeof accordionItemVariants> {\n\tchildren: React.ReactNode;\n\tvalue?: string;\n\tid?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n\tdefaultOpen?: boolean;\n}\n\ntype DisclosureButtonProps = React.ComponentPropsWithoutRef<\n\ttypeof Ariakit.Disclosure\n>;\n\nexport interface AccordionTriggerProps\n\textends Omit<DisclosureButtonProps, 'store'>,\n\t\tVariantProps<typeof accordionTriggerVariants> {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tdisabled?: boolean;\n}\n\nexport interface AccordionContentProps\n\textends React.HTMLAttributes<HTMLDivElement>,\n\t\tVariantProps<typeof accordionContentVariants> {\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}\ntype AccordionStyleContextType = {\n\tvariant: 'default' | 'card';\n\tsize: 'sm' | 'md' | 'lg';\n};\n\nconst AccordionStyleContext = createContext<\n\tAccordionStyleContextType | undefined\n>(undefined);\n\nconst useAccordionStyle = () => {\n\tconst context = useContext(AccordionStyleContext);\n\tif (!context) {\n\t\tthrow new Error('Accordion components must be used within an Accordion');\n\t}\n\treturn context;\n};\n\ntype AccordionBehaviorContextType = {\n\ttype: 'single' | 'multiple';\n\tregisterItem: (value: string, store: Ariakit.DisclosureStore) => void;\n\tunregisterItem: (value: string) => void;\n\tnotifyItemOpen: (value: string) => void;\n};\n\nconst AccordionBehaviorContext = createContext<\n\tAccordionBehaviorContextType | undefined\n>(undefined);\n\nconst useAccordionBehavior = () => {\n\tconst context = useContext(AccordionBehaviorContext);\n\tif (!context) {\n\t\tthrow new Error('Accordion components must be used within an Accordion');\n\t}\n\treturn context;\n};\n\ntype AccordionItemContextType = {\n\tstore: Ariakit.DisclosureStore;\n\tdisabled: boolean;\n\ttriggerId: string;\n\tcontentId: string;\n};\n\nconst AccordionItemContext = createContext<\n\tAccordionItemContextType | undefined\n>(undefined);\n\nconst useAccordionItem = () => {\n\tconst context = useContext(AccordionItemContext);\n\tif (!context) {\n\t\tthrow new Error(\n\t\t\t'AccordionTrigger and AccordionContent must be used within an AccordionItem',\n\t\t);\n\t}\n\treturn context;\n};\n\nexport const Accordion: React.FC<AccordionProps> = React.memo(\n\t({\n\t\tchildren,\n\t\tvariant = 'default',\n\t\tsize = 'md',\n\t\tclassName,\n\t\ttype = 'single',\n\t\tonValueChange,\n\t\t...props\n\t}) => {\n\t\tconst resolvedVariant: 'default' | 'card' = variant ?? 'default';\n\t\tconst resolvedSize: 'sm' | 'md' | 'lg' = size ?? 'md';\n\t\tconst resolvedType: 'single' | 'multiple' = type ?? 'single';\n\n\t\tconst styleValue = useMemo(\n\t\t\t() => ({ variant: resolvedVariant, size: resolvedSize }),\n\t\t\t[resolvedVariant, resolvedSize],\n\t\t);\n\n\t\tconst itemsRef = React.useRef<Map<string, Ariakit.DisclosureStore>>(\n\t\t\tnew Map(),\n\t\t);\n\n\t\tconst registerItem = useCallback(\n\t\t\t(value: string, store: Ariakit.DisclosureStore) => {\n\t\t\t\titemsRef.current.set(value, store);\n\t\t\t},\n\t\t\t[],\n\t\t);\n\n\t\tconst unregisterItem = useCallback((value: string) => {\n\t\t\titemsRef.current.delete(value);\n\t\t}, []);\n\n\t\tconst notifyItemOpen = useCallback(\n\t\t\t(value: string) => {\n\t\t\t\tif (resolvedType === 'single') {\n\t\t\t\t\titemsRef.current.forEach((store, key) => {\n\t\t\t\t\t\tif (key !== value) {\n\t\t\t\t\t\t\tif (typeof store.setOpen === 'function') {\n\t\t\t\t\t\t\t\tstore.setOpen(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (typeof onValueChange === 'function') {\n\t\t\t\t\tonValueChange(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[resolvedType, onValueChange],\n\t\t);\n\n\t\tconst behaviorValue = useMemo<AccordionBehaviorContextType>(\n\t\t\t() => ({\n\t\t\t\ttype: resolvedType,\n\t\t\t\tregisterItem,\n\t\t\t\tunregisterItem,\n\t\t\t\tnotifyItemOpen,\n\t\t\t}),\n\t\t\t[resolvedType, registerItem, unregisterItem, notifyItemOpen],\n\t\t);\n\n\t\treturn (\n\t\t\t<AccordionStyleContext.Provider value={styleValue}>\n\t\t\t\t<AccordionBehaviorContext.Provider value={behaviorValue}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tdata-accordion-root\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\taccordionVariants({ variant: resolvedVariant }),\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div>\n\t\t\t\t</AccordionBehaviorContext.Provider>\n\t\t\t</AccordionStyleContext.Provider>\n\t\t);\n\t},\n);\n\nAccordion.displayName = 'Accordion';\n\nexport const AccordionItem: React.FC<AccordionItemProps> = React.memo(\n\t({\n\t\tchildren,\n\t\tvalue,\n\t\tid,\n\t\tclassName,\n\t\tdisabled = false,\n\t\tdefaultOpen = false,\n\t\t...props\n\t}) => {\n\t\tconst { variant } = useAccordionStyle();\n\t\tconst { registerItem, unregisterItem, notifyItemOpen } =\n\t\t\tuseAccordionBehavior();\n\t\tconst reactId = React.useId();\n\t\tconst baseId = (id || value || reactId).toString();\n\n\t\tconst store = Ariakit.useDisclosureStore({ defaultOpen });\n\n\t\tconst triggerId = `${baseId}-trigger`;\n\t\tconst contentId = `${baseId}-content`;\n\n\t\tconst contextValue = useMemo<AccordionItemContextType>(\n\t\t\t() => ({ store, disabled: !!disabled, triggerId, contentId }),\n\t\t\t[store, disabled, triggerId, contentId],\n\t\t);\n\n\t\tconst open = Ariakit.useStoreState(store, 'open');\n\n\t\tReact.useEffect(() => {\n\t\t\tregisterItem(baseId, store);\n\t\t\treturn () => unregisterItem(baseId);\n\t\t}, [baseId, registerItem, unregisterItem, store]);\n\n\t\tReact.useEffect(() => {\n\t\t\tif (open) {\n\t\t\t\tnotifyItemOpen(baseId);\n\t\t\t}\n\t\t}, [open, baseId, notifyItemOpen]);\n\n\t\tif (variant === 'card') {\n\t\t\treturn (\n\t\t\t\t<AccordionItemContext.Provider value={contextValue}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\taccordionItemVariants({ variant, isOpen: open }),\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative rounded-lg border border-border bg-card shadow-md card-highlight\">\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</AccordionItemContext.Provider>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<AccordionItemContext.Provider value={contextValue}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\taccordionItemVariants({ variant, isOpen: open }),\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t)}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</AccordionItemContext.Provider>\n\t\t);\n\t},\n);\n\nAccordionItem.displayName = 'AccordionItem';\n\nexport const AccordionTrigger: React.FC<AccordionTriggerProps> = React.memo(\n\t({\n\t\tchildren,\n\t\tclassName,\n\t\tdisabled: disabledProp,\n\t\tvariant: _variantProp,\n\t\tsize: _sizeProp,\n\t\tisOpen: _isOpenProp,\n\t\t...props\n\t}) => {\n\t\tconst { variant, size } = useAccordionStyle();\n\t\tconst { store, disabled, triggerId, contentId } = useAccordionItem();\n\t\tconst isOpen = Ariakit.useStoreState(store, 'open');\n\t\tconst mergedDisabled = Boolean(disabled || disabledProp);\n\n\t\tconst iconSize = useMemo(() => {\n\t\t\treturn size === 'sm' ? 14 : size === 'md' ? 16 : 20;\n\t\t}, [size]);\n\n\t\treturn (\n\t\t\t<h3>\n\t\t\t\t<Ariakit.Disclosure\n\t\t\t\t\tstore={store}\n\t\t\t\t\tid={triggerId}\n\t\t\t\t\tdata-accordion-trigger\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\taccordionTriggerVariants({\n\t\t\t\t\t\t\tvariant,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tdisabled: mergedDisabled,\n\t\t\t\t\t\t\tisOpen,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t)}\n\t\t\t\t\taria-controls={contentId}\n\t\t\t\t\taria-disabled={mergedDisabled || undefined}\n\t\t\t\t\tdisabled={mergedDisabled}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"font-medium\">{children}</span>\n\t\t\t\t\t<Icons.ChevronDown\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t'ml-2 shrink-0 text-foreground/70 transition-[rotate] duration-300 ease-smooth will-change-transform',\n\t\t\t\t\t\t\tisOpen ? 'rotate-180' : 'rotate-0',\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tstyle={{ width: iconSize, height: iconSize }}\n\t\t\t\t\t/>\n\t\t\t\t</Ariakit.Disclosure>\n\t\t\t</h3>\n\t\t);\n\t},\n);\n\nAccordionTrigger.displayName = 'AccordionTrigger';\n\nexport const AccordionContent: React.FC<AccordionContentProps> = React.memo(\n\t({ children, className, ...props }) => {\n\t\tconst { variant, size } = useAccordionStyle();\n\t\tconst { store, triggerId, contentId } = useAccordionItem();\n\t\tconst isOpen = Ariakit.useStoreState(store, 'open');\n\n\t\tconst contentRef = React.useRef<HTMLDivElement>(null);\n\t\tconst innerRef = React.useRef<HTMLDivElement>(null);\n\t\tconst [height, setHeight] = React.useState<number>(0);\n\t\tconst rafRef = React.useRef<number | undefined>(undefined);\n\n\t\tconst updateHeight = React.useCallback(() => {\n\t\t\tif (rafRef.current) {\n\t\t\t\tcancelAnimationFrame(rafRef.current);\n\t\t\t}\n\n\t\t\trafRef.current = requestAnimationFrame(() => {\n\t\t\t\tif (innerRef.current) {\n\t\t\t\t\tconst newHeight = innerRef.current.scrollHeight;\n\t\t\t\t\tsetHeight(newHeight);\n\t\t\t\t}\n\t\t\t});\n\t\t}, []);\n\n\t\tReact.useEffect(() => {\n\t\t\tif (!innerRef.current) return;\n\n\t\t\tconst resizeObserver = new ResizeObserver(() => {\n\t\t\t\tupdateHeight();\n\t\t\t});\n\n\t\t\tresizeObserver.observe(innerRef.current);\n\t\t\tupdateHeight();\n\n\t\t\treturn () => {\n\t\t\t\tresizeObserver.disconnect();\n\t\t\t\tif (rafRef.current) {\n\t\t\t\t\tcancelAnimationFrame(rafRef.current);\n\t\t\t\t}\n\t\t\t};\n\t\t}, [updateHeight]);\n\n\t\tReact.useEffect(() => {\n\t\t\tupdateHeight();\n\t\t}, [updateHeight]);\n\n\t\tconst contentStyle = useMemo(\n\t\t\t() => ({\n\t\t\t\theight: isOpen ? `${height}px` : '0px',\n\t\t\t\topacity: isOpen ? 1 : 0,\n\t\t\t}),\n\t\t\t[isOpen, height],\n\t\t);\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={contentRef}\n\t\t\t\tclassName={cn(accordionContentVariants({ size }), className)}\n\t\t\t\tstyle={contentStyle}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t<section\n\t\t\t\t\tid={contentId}\n\t\t\t\t\taria-labelledby={triggerId}\n\t\t\t\t\taria-hidden={!isOpen}\n\t\t\t\t\tinert={!isOpen}\n\t\t\t\t\tref={innerRef}\n\t\t\t\t\tclassName={cn(accordionContentInnerVariants({ variant, size }))}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nAccordionContent.displayName = 'AccordionContent';\n",
      "type": "registry:component"
    }
  ]
}